# Diogenes

*** Note: *** This project is a simple application meant for me to learn terraform and azure coming from an AWS background. The application is a simple quote generator that uses an AI to generate a humorous context for the quote. The application is built using Next.js and uses a PostgreSQL database to store the quotes and their context. The infrastructure is managed using Terraform.

**Diogenes** is a witty (but seriously unfunny) Next.js application that presents random quotes along with humorous, tongue-in-cheek context generated by an AI named Diogenes. The app leverages Azure OpenAI (gpt-35-turbo) for generating creative commentary and stores quotes in a PostgreSQL database provisioned via Terraform. Whether you're in need of a little inspiration or a good laugh, Diogenes offers a unique blend of wisdom and humor.

## Features

- **Random Quotes:** Fetches random quotes from the Forismatic API.
- **Humorous Context:** Uses Azure OpenAI to generate a creative backstory for each quote.
- **Persistent Storage:** Stores quotes and their AI-generated context in a PostgreSQL database.
- **Terraform-Managed Infrastructure:** All infrastructure is provisioned and managed using Terraform.
- **Modern Frontend:** Built with Next.js, with optimized fonts and responsive design.

## Getting Started

### Prerequisites

- **Node.js** (v14 or later)
- **Terraform** (v1.x or later)
- **Azure CLI** (for local Azure authentication)
- **PostgreSQL** (for local development, if needed)

### Local Setup

1. **Clone the Repository:**

   ```bash
   git clone https://github.com/DinoF15/diogenes.git
   cd diogenes



2. **Install Dependencies:**

   ```bash
   npm install
   ```

3. **Set Environment Variables:**

    ``` base 
    FORISMATIC_API_URL=http://api.forismatic.com/api/1.0/
    AZURE_OPENAI_ENDPOINT="https://00081-m83gwj5a-eastus2.cognitiveservices.azure.com"
    AZURE_OPENAI_API_KEY="your-azure-openai-api-key"
    AZURE_OPENAI_DEPLOYMENT_NAME="gpt-35-turbo"
    AZURE_OPENAI_API_VERSION="2024-10-21"
    DATABASE_URL="postgresql://diogenesadmin:your_password@diogenes-postgresql-server.postgres.database.azure.com:5432/diogenes?sslmode=require"
    ```


4. **Run the Development Server:**

   ```bash
   npm run dev
   ```


# Infrastructure deployment using Terraform

Diogenes uses Terraform to provision its Azure resources, including:

- **Azure Container Registry:** Stores the Docker image for the Next.js app.
- **Azure PostgreSQL Server:** Hosts the PostgreSQL database for storing quotes.
- **Azure Web App:** Deploys the Next.js app and connects to the PostgreSQL database.

To deploy the infrastructure, follow these steps:

1. **Install Terraform:**

   If you haven't already, install Terraform by following the [official installation guide](https://learn.hashicorp.com/tutorials/terraform/install-cli).

2. **Set Up Azure Authentication:**

   If you haven't already, set up Azure authentication by following the [official Azure CLI guide](https://learn.hashicorp.com/tutorials/terraform/azure-build).

3. **Initialize Terraform:**

   Run the following command to initialize Terraform:

   ```bash
   terraform init
   ```


# Continuous Deployment with GitHub Actions

Diogenes uses GitHub Actions for continuous deployment, automatically deploying the Next.js app to Azure Web App whenever changes are pushed to the `main` branch.

Your project is set up to deploy infrastructure using GitHub Actions. The workflow in .github/workflows/terraform-deploy.yml automatically:

    Checks out the repository.
    Authenticates with Azure using a service principal.
    Runs terraform init, terraform plan, and terraform apply to deploy resources.

To enable continuous deployment, follow these steps by adding the following secrets to your GitHub repository:

        AZURE_SUBSCRIPTION_ID = "your-azure-subscription-id"
        AZURE_CLIENT_ID = "your-azure-client-id"
        AZURE_CLIENT_SECRET = "your-azure
        AZURE_TENANT_ID = "your-azure-tenant-id"
 

 # License 

This project is not licensed and is meant to serve as a portfolio project. Feel free to use the code as a reference or for your own learning purposes.